{% extends "base.html" %}

{% load tags %}

{% block pagetitle %}scrum - item view{% endblock %}
{% block title %}item view{% endblock %}

{% block left %}
<div class="btn-group-vertical fill-h padding-bottom-20" role="group">
    <a class="btn btn-lg btn-warning" href="/projects/{{ project_id }}/releases/{{ release_id }}">Back <i class="fa fa-arrow-left"></i></a>
    <a class="btn btn-lg btn-default" href="/projects/{{ project_id }}/releases/{{ release_id }}/items/edit/{{ item.id }}">Edit item </a>
    <a class="btn btn-lg btn-danger" href="/projects/{{ project_id }}/releases/{{ release_id }}/items/delete/{{ item.id }}" aria-disabled="true">Delete item <i class="fa fa-trash-o"></i></a>
</div>
{% endblock %}

{% block right %}
<div class="panel panel-primary fill-h">
    <div class="list-group-item">Created:<br> {{ item.date_created }}</div>
    <div class="list-group-item">Modified:<br> {{ item.date_modified }}</div>
    <div class="list-group-item" id="date_started">
        Start:<br>
        {% if not item.date_started %}
            <button class="fa fa-play full-width btn btn-primary btn-sm margin-btm-5" onclick="trigger_start('{{item.id}}');">Start Item</button>
        {% else %}
            {{ item.date_started }}
        {% endif %}

    </div>
    <div class="list-group-item" id="date_completed">
        Completed:<br>
        {% if not item.date_completed %}
            <button class="fa fa-check-square-o full-width btn btn-primary btn-sm margin-btm-5" onclick="trigger_complete_action('{{item.id}}')">Complete, With Action</button>
            <button class="fa fa-check-square-o full-width btn btn-primary btn-sm margin-btm-5" onclick="trigger_complete_no_action('{{item.id}}')">Complete, No Action</button>
        {% else %}
            {{ item.date_completed }}
        {% endif %}

    </div>
</div>
{% endblock %}

{% block content %}

<div class="panel panel-primary fill-h">
    <div class="panel-heading font-size-18">{{ item.title }}</div>
    <div class="list-group-item"><div class="p-no-margin"><u>Detail</u><br>{{ item.detail|linebreaks }}</div></div>
    <div class="list-group-item"><u>Type</u><br> {{ item.type }}</div>
    <div class="list-group-item"><u>Priority</u><br> {{ item.priority|show_priority }}</div>
    <div class="list-group-item"><u>Effort</u><br> {{ item.effort }}</div>
    <div class="list-group-item"><u>Release</u><br> {{ item.release }}</div>
    <div class="list-group-item"><u>Status</u><br> {{ item.status|status }}</div>
    <!--<div class="list-group-item"><u>Project</u><br> {{ item.type }}</div>-->
    <div class="list-group-item"><u>Owner</u><br> {{ item.owner }}</div>
</div>

<script type="text/javascript">
var csrf_token = "{{ csrf_token }}";
</script>
<script src="/static/js/item_view.js"></script>

{% endblock %}