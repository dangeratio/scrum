{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block title %}
{% if item.id %}
    scrum - edit item
{% else %}
    scrum - create item
{% endif %}
{% endblock %}

{% block left %}
<div class="btn-group-vertical fill-h padding-bottom-20" role="group">
    <a class="btn btn-lg btn-warning" href="/items/"><i class="fa fa-times"></i> Cancel</a>
    {% if item.id %}<a class="btn btn-lg btn-danger" href="/items/delete/{{ item.id }}"><i class="fa fa-trash-o"></i> Delete</a>{% endif %}
</div>
{% endblock %}


{% block content %}

    <form action="{% if item.id %}/items/edit/{{ item.id }}{% else %}/items/create/{% endif %}" method="POST">
    {% csrf_token %}

    <div class="panel panel-primary">
        <div class="panel-heading">edit item</div>
        <table class="list-group">
            {% for field in form %}
            <div class="list-group-item">
                <div>{{ field.label|lower }}</div>
                <div>{{ field }}</div>
                {% if field.errors %}
                    {% for error in  field.errors %}
                        <div class="alert alert-danger" role="alert">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div>
            {% endfor %}
            <div class="list-group-item">
                <button type="submit" class="btn btn-lg btn-success" name="submit"><i class="fa fa-check"></i> Submit</button>
                <button type="submit" class="btn btn-lg btn-success" name="submit_and_add"><i class="fa fa-check"></i> Submit and Add New</button>
            </div>
        </table>
    </div>

    </form>

{% endblock %}
